Uluru.prototype.showFindCard=function(){this.logMessage("SHOW FIND CARD"),this.showScreen("find_card"),this.newCardWorkflowRenderer("main",this.searchCardBuilder()),$("#search_card").focus()},Uluru.prototype.findCard=function(){this.logMessage("FIND CARD");var e=function(){this.showLoading()}.bind(this),i=function(e){this.logMessage(e),this.hideLoading(),"OK"===e.status?($("#list_cards").addClass("visible"),e.result&&e.result.length>0?this.renderCardsList(e.result):$("#list_cards").html("Aucune carte trouvée")):(this.logError(e.message),notification.create({title:"Erreur",content:e.message}),$("#list_cards").empty().removeClass("visible"))}.bind(this),s=document.getElementById("find_card"),t=new FormData(s);this.apiRequest("POST","cartes","find",t,e,i,!1)},Uluru.prototype.renderCardsList=function(e){this.logMessage("RENDER CARDS LIST");$("#list_cards").empty();$("#list_cards").append("<div class='item row header'><div class='cell'>ID</div><div class='cell'>Patient</div><div class='cell'>Date de naissance</div><div class='cell'>Médecin</div><div class='cell'>Date d'implatation</div></div>"),e.forEach(function(e){var i=new moment(e.patient_date_naissance).format("DD/MM/YYYY"),s=new moment(e.boitier_date_implantation).format("DD/MM/YYYY"),t="<div class='item row' id='card_"+e.id+"'>";t+="<div class='cell'>"+e.id+"</div>",t+="<div class='cell'>"+e.patient_nom+", "+e.patient_prenom+"</div>",t+="<div class='cell'>"+i+"</div>",t+="<div class='cell'>"+e.medecin+"</div>",t+="<div class='cell'>"+s+"</div>",t+="</div>",$("#list_cards").append(t),$("#card_"+e.id).click(function(){this.data=e.data,this.newCardWorkflowRenderer("new_card",this.resumeCardBuilder()),this.resumeCard(!1),this.showScreen("new_carte"),this.goToStep("resume")}.bind(this))}.bind(this))};