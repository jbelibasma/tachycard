Uluru.prototype.showNewCenter=function(){this.logMessage("SHOW NEW CENTER FORM"),this.showScreen("new_centers"),$("#new_center_form input[name='name']").focus()},Uluru.prototype.loadCentersList=function(e){this.logMessage("LOAD CENTERS LIST");var t=function(){$("#list_centers").html("Chargement en cours...<div class='loadBall'></div>")}.bind(this),n=function(e){this.logMessage(e),"OK"===e.status?e.result&&e.result.length>0?this.renderCentersList(e.result):$("#list_centers").html("Aucun centre trouvé"):(this.logError(e.message),notification.create({title:"Erreur",content:e.message}))}.bind(this),s=!1;e&&(s="search="+e),this.apiRequest("GET","centers","list",s,t,n,!1)},Uluru.prototype.renderCentersList=function(e){this.logMessage("RENDER CENTERS LIST");$("#list_centers").empty(),e.forEach(function(e){var t="<div class='item row' id='center_"+e.id+"'>";t+="<div class='cell'>"+e.name+"</div>",t+="<div class='cell'>"+e.adresse1+"</div>",t+="<div class='cell'>"+e.code_postal+"</div>",t+="<div class='cell'>"+e.ville+"</div>",t+="</div>",$("#list_centers").append(t),$("#center_"+e.id).click(function(){this.renderUpdateCenter(e)}.bind(this))}.bind(this))},Uluru.prototype.recordCenter=function(){this.logMessage("RECORD CENTER");var e=$("#new_center_form").serialize(),t=function(){this.showLoading()}.bind(this),n=function(e){this.logMessage(e),this.hideLoading(),"OK"===e.status?(notification.create({title:"Centre créé",content:e.result.name,icon:"check.svg",delay:2e3}),$("#new_centers input[name=id]").val(""),$("#new_centers input[name=name]").val(""),$("#new_centers input[name=adresse1]").val(""),$("#new_centers input[name=adresse2]").val(""),$("#new_centers input[name=adresse3]").val(""),$("#new_centers input[name=code_postal]").val(""),$("#new_centers input[name=ville]").val(""),$("#new_centers input[name=tel]").val(""),$("#new_centers input[name=pays]").val(""),this.showScreen("centers"),this.loadCentersList()):(this.logError(e.message),notification.create({title:"Erreur",content:e.message,icon:"error.svg"}))}.bind(this);this.apiRequest("GET","centers","create",e,t,n,!1)},Uluru.prototype.updateCenter=function(){this.logMessage("UPDATE USER");var e=$("#update_center_form").serialize(),t=function(){this.showLoading()}.bind(this),n=function(e){this.logMessage(e),this.hideLoading(),"OK"===e.status?(notification.create({title:"Centre modifié",content:e.message,icon:"check.svg",delay:2e3}),$("#new_centers input[name=id]").val(""),$("#new_centers input[name=name]").val(""),$("#new_centers input[name=adresse1]").val(""),$("#new_centers input[name=adresse2]").val(""),$("#new_centers input[name=adresse3]").val(""),$("#new_centers input[name=code_postal]").val(""),$("#new_centers input[name=ville]").val(""),$("#new_centers input[name=tel]").val(""),$("#new_centers input[name=pays]").val(""),this.showScreen("centers"),this.loadCentersList()):(this.logError(e.message),notification.create({title:"Erreur",content:e.message,icon:"error.svg"}))}.bind(this);this.apiRequest("GET","centers","update",e,t,n,!1)},Uluru.prototype.renderUpdateCenter=function(e){this.logMessage("RENDER UPDATE CENTER");var t="#update_centers";$(t+" input[name=id]").val(e.id),$(t+" input[name=name]").val(e.name),$(t+" input[name=adresse1]").val(e.adresse1),$(t+" input[name=adresse2]").val(e.adresse2),$(t+" input[name=adresse3]").val(e.adresse3),$(t+" input[name=code_postal]").val(e.code_postal),$(t+" input[name=ville]").val(e.ville),$(t+" input[name=tel]").val(e.tel),$(t+" input[name=pays]").val(e.pays),this.showScreen("update_centers")};